<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" 
    rel="stylesheet" 
    integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" 
    crossorigin="anonymous">
    <link rel="stylesheet" href="./style.css">
    
    <title>Successo rimozione!</title>

    <h1 style="text-align:center">Centri culturali di Bologna</h1>
    <p style="text-align:center"> Ricerca la struttura di tuo interesse! </p>
</head>
<body>
    <p> L'elemento che hai deciso di rimuovere è:</p>

        <!-- inserimento Tabella -->
        <table id="table" style="margin-top: 20px">
            <colgroup>
                <col id="col" style="background-color: rgb(180, 217, 250)">
                <col>
                <col style="background-color: rgb(180, 217, 250)">
                <col>
                <col style="background-color: rgb(180, 217, 250)">
                <row id="row"></row>
            </colgroup>
            <thead style="background-color: rgb(86, 86, 244)">
                <tr>
                    <th scope="col">Denominazione</th>
                    <th scope="col">Quartiere</th>
                    <th scope="col">Indirizzo</th>
                    <th scope="col">Categoria</th>
                    <th scope="col">Descrizione</th>
                </tr>        
            </thead>
            <tbody id="tabellaDati"></tbody>
        </table>

        <script>
        // al caricare della pagina viene chiamata la funzione "inserimentoDati"
        window.addEventListener("load", inserimentoDati); 

        // chiamata http al sever dove vengono chiesti tutti i dati csv
        async function inserimentoDati() {
            // attendo la risposta della chiamata di recupero dei dati
            const response = await fetch("/strutturaRichiesta");
            // procedi solo una volta che la promessa è stata risolta
            const struttura = await response.json();            

            for(let i = 0; i < struttura.length; i++){
              inserimentoInTabella =
                  '<tr class="fw-lighter"><th scope="row">' + 
                           JSON.stringify(struttura[i].Denominazione) + '</th>' +
                  '<td>' + JSON.stringify(struttura[i].Quartiere) + '</td>' + 
                  '<td>' + JSON.stringify(struttura[i].Indirizzo) + '</td>' +
                  '<td>' + JSON.stringify(struttura[i].Categoria) + '</td>' +
                  '<td>' + JSON.stringify(struttura[i].Descrizione) + '</td>';
                
                  document.getElementById("tabellaDati").innerHTML += inserimentoInTabella;
            }
          }
        </script>
</body>
</html>